<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ê≤≥Èáé„Ç¢„É©„Éº„É† - ÂãâÂº∑„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
            background: linear-gradient(135deg, #1e90ff 0%, #00bfff 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            padding-top: 280px;
            padding-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            bottom: 0;
            right: 0;
            width: 800px;
            height: 800px;
            background-image: url('kono.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: bottom right;
            opacity: 1;
            pointer-events: none;
            z-index: 10;
        }

        body::after {
            content: '';
            position: fixed;
            bottom: 0;
            left: 0;
            width: 750px;
            height: 750px;
            background-image: url('kono.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: bottom left;
            opacity: 1;
            pointer-events: none;
            z-index: 10;
            transform: scaleX(-1);
        }

        .kono-clone-1 {
            content: '';
            position: fixed;
            top: 23%;
            right: 1%;
            width: 310px;
            height: 310px;
            background-image: url('kono.png');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.9;
            pointer-events: none;
            z-index: 0;
            animation: float1 6.3s ease-in-out infinite;
        }

        .kono-clone-2 {
            content: '';
            position: fixed;
            top: 38%;
            left: 1%;
            width: 290px;
            height: 290px;
            background-image: url('kono.png');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.85;
            pointer-events: none;
            z-index: 0;
            transform: scaleX(-1);
            animation: float2 7.7s ease-in-out infinite;
        }

        .kono-clone-3 {
            content: '';
            position: fixed;
            top: 33%;
            right: 25%;
            width: 265px;
            height: 265px;
            background-image: url('kono.png');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.88;
            pointer-events: none;
            z-index: 0;
            transform: scaleX(-1);
            animation: float3 7s ease-in-out infinite;
        }

        .kono-clone-4 {
            content: '';
            position: fixed;
            top: 27%;
            left: 18%;
            width: 275px;
            height: 275px;
            background-image: url('kono.png');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.92;
            pointer-events: none;
            z-index: 0;
            animation: float4 5s ease-in-out infinite;
        }

        .kono-clone-5 {
            content: '';
            position: fixed;
            top: 15%;
            right: 30%;
            width: 280px;
            height: 280px;
            background-image: url('kono.png');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 1;
            pointer-events: none;
            z-index: 10;
            transform: scaleX(-1);
            animation: float5 7s ease-in-out infinite;
        }

        .kono-clone-6 {
            content: '';
            position: fixed;
            top: 30%;
            right: 5%;
            width: 300px;
            height: 300px;
            background-image: url('kono.png');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 1;
            pointer-events: none;
            z-index: 10;
            animation: float6 6.5s ease-in-out infinite;
        }

        @keyframes float1 {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-38px) rotate(3.5deg); }
        }

        @keyframes float2 {
            0%, 100% { transform: scaleX(-1) translateY(0px) rotate(0deg); }
            50% { transform: scaleX(-1) translateY(-42px) rotate(-2.5deg); }
        }

        @keyframes float3 {
            0%, 100% { transform: scaleX(-1) translateY(0px) rotate(0deg); }
            50% { transform: scaleX(-1) translateY(-32px) rotate(4.2deg); }
        }

        @keyframes float4 {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-36px) rotate(-1.8deg); }
        }

        @keyframes float5 {
            0%, 100% { transform: scaleX(-1) translateY(0px) rotate(0deg); }
            50% { transform: scaleX(-1) translateY(-30px) rotate(6deg); }
        }

        @keyframes float6 {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-38px) rotate(-3deg); }
        }

        .container {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 450px;
            width: 100%;
            position: relative;
            z-index: 1;
            max-height: 80vh;
            overflow-y: auto;
        }

        .page-title {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 58px;
            font-weight: 900;
            color: white;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 3;
            margin: 0;
            letter-spacing: 3px;
            text-align: center;
            line-height: 1.3;
        }

        .youtube-link {
            position: fixed;
            top: 270px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 14px;
            color: white;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            z-index: 3;
            text-decoration: none;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        .youtube-link:hover {
            opacity: 1;
            text-decoration: underline;
        }

        .alarm-setup {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .time-input {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        label {
            font-size: 18px;
            color: #555;
            font-weight: 600;
        }

        input[type="time"] {
            flex: 1;
            padding: 12px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 10px;
            outline: none;
            transition: border-color 0.3s;
        }

        input[type="time"]:focus {
            border-color: #0077ff;
        }

        button {
            padding: 15px 30px;
            font-size: 18px;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .set-alarm {
            background: #0077ff;
            color: white;
        }

        .set-alarm:hover {
            background: #0066dd;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 119, 255, 0.4);
        }

        .set-alarm:active {
            transform: translateY(0);
        }

        .cancel-alarm {
            background: #ff6b6b;
            color: white;
            display: none;
        }

        .cancel-alarm:hover {
            background: #ee5a5a;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .status {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 500;
        }

        .status.waiting {
            background: #d4edda;
            color: #155724;
        }

        .status.not-set {
            background: #f8f9fa;
            color: #6c757d;
        }

        .video-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .video-overlay.active {
            display: flex;
        }

        video {
            max-width: 90vw;
            max-height: 70vh;
            border-radius: 10px;
        }

        .stop-alarm {
            margin-top: 30px;
            padding: 20px 40px;
            font-size: 20px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .stop-alarm:hover {
            background: #ee5a5a;
            transform: scale(1.05);
        }

        .current-time-section {
            text-align: center;
            margin-bottom: 20px;
        }

        .current-time-section.hidden {
            display: none;
        }

        .current-time-label {
            font-size: 20px;
            color: #6c757d;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: 3px;
        }

        .current-time {
            font-size: 48px;
            font-weight: 700;
            color: #0077ff;
            font-variant-numeric: tabular-nums;
        }

        .mode-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .mode-btn {
            flex: 1;
            padding: 10px;
            background: #f8f9fa;
            color: #6c757d;
            font-size: 16px;
            font-weight: 600;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .mode-btn.active {
            background: #0077ff;
            color: white;
            border-color: #0077ff;
        }

        .mode-btn:hover {
            transform: translateY(-2px);
        }

        .timer-section {
            display: none;
        }

        .timer-section.active {
            display: block;
        }

        .alarm-section {
            display: none;
        }

        .alarm-section.active {
            display: block;
        }

        .timer-display {
            text-align: center;
            font-size: 40px;
            font-weight: 700;
            color: #0077ff;
            margin-bottom: 10px;
            font-variant-numeric: tabular-nums;
            font-family: 'Courier New', monospace;
            letter-spacing: 5px;
        }

        .timer-keypad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            margin-bottom: 8px;
        }

        .keypad-btn {
            padding: 10px;
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 700;
            color: #495057;
            transition: all 0.2s;
        }

        .keypad-btn:hover {
            background: #e9ecef;
            transform: scale(1.05);
        }

        .keypad-btn:active {
            transform: scale(0.95);
        }

        .keypad-btn.clear {
            background: #ff6b6b;
            color: white;
            border-color: #ff6b6b;
        }

        .keypad-btn.clear:hover {
            background: #ee5a5a;
        }

        .keypad-btn.delete {
            background: #ffa500;
            color: white;
            border-color: #ffa500;
        }

        .keypad-btn.delete:hover {
            background: #ff9500;
        }

        .timer-presets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
            margin-bottom: 8px;
        }

        .preset-btn {
            padding: 6px;
            background: #e9ecef;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            font-size: 11px;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s;
        }

        .preset-btn:hover {
            background: #0077ff;
            color: white;
            border-color: #0077ff;
            transform: translateY(-2px);
        }

        @media (max-width: 600px) {
            body {
                padding-bottom: 40px;
            }

            .container {
                padding: 20px;
                max-height: 75vh;
            }

            .page-title {
                font-size: 20px;
                top: 60px;
                letter-spacing: 1px;
                transform: translateX(-50%);
            }

            .youtube-link {
                font-size: 10px;
                top: 125px;
            }

            .current-time {
                font-size: 32px;
            }

            .current-time-label {
                font-size: 14px;
            }

            .timer-display {
                font-size: 36px;
                margin-bottom: 10px;
            }

            .keypad-btn {
                padding: 10px;
                font-size: 16px;
            }

            .time-input {
                flex-direction: column;
                align-items: stretch;
            }

            .timer-presets {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <h1 class="page-title">‰Ωï„Ç¢„É©„Éº„É†„Åã„Åë„Å¶„Çã„Çì„Åß„Åô„ÅãÔºüÔºü<br>ÂãâÂº∑„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅÔºÅÔºÅ</h1>
    <a href="https://www.youtube.com/watch?v=wBf47hGMch0" target="_blank" class="youtube-link">https://www.youtube.com/watch?v=wBf47hGMch0</a>

    <div class="kono-clone-1"></div>
    <div class="kono-clone-2"></div>
    <div class="kono-clone-3"></div>
    <div class="kono-clone-4"></div>

    <div class="container">
        <div class="current-time-section">
            <div class="current-time-label">ÁèæÂú®ÊôÇÂàª</div>
            <div class="current-time" id="currentTime">--:--:--</div>
        </div>

        <div class="mode-toggle">
            <button class="mode-btn active" id="alarmModeBtn">‚è∞ „Ç¢„É©„Éº„É†</button>
            <button class="mode-btn" id="timerModeBtn">‚è±Ô∏è „Çø„Ç§„Éû„Éº</button>
        </div>

        <div class="alarm-setup">
            <!-- „Ç¢„É©„Éº„É†„É¢„Éº„Éâ -->
            <div class="alarm-section active" id="alarmSection">
                <div class="time-input">
                    <label for="alarmTime">„Ç¢„É©„Éº„É†ÊôÇÂàª:</label>
                    <input type="time" id="alarmTime" value="07:00">
                </div>
            </div>

            <!-- „Çø„Ç§„Éû„Éº„É¢„Éº„Éâ -->
            <div class="timer-section" id="timerSection">
                <div class="timer-display">
                    <span id="timerMinutes">00</span>:<span id="timerSeconds">00</span>
                </div>
                <div class="timer-keypad">
                    <button class="keypad-btn" data-num="1">1</button>
                    <button class="keypad-btn" data-num="2">2</button>
                    <button class="keypad-btn" data-num="3">3</button>
                    <button class="keypad-btn" data-num="4">4</button>
                    <button class="keypad-btn" data-num="5">5</button>
                    <button class="keypad-btn" data-num="6">6</button>
                    <button class="keypad-btn" data-num="7">7</button>
                    <button class="keypad-btn" data-num="8">8</button>
                    <button class="keypad-btn" data-num="9">9</button>
                    <button class="keypad-btn clear" id="clearBtn">C</button>
                    <button class="keypad-btn" data-num="0">0</button>
                    <button class="keypad-btn delete" id="deleteBtn">‚å´</button>
                </div>
                <div class="timer-presets">
                    <button class="preset-btn" data-minutes="1">1ÂàÜ</button>
                    <button class="preset-btn" data-minutes="3">3ÂàÜ</button>
                    <button class="preset-btn" data-minutes="5">5ÂàÜ</button>
                    <button class="preset-btn" data-minutes="10">10ÂàÜ</button>
                    <button class="preset-btn" data-minutes="15">15ÂàÜ</button>
                    <button class="preset-btn" data-minutes="30">30ÂàÜ</button>
                </div>
            </div>

            <button class="set-alarm" id="setAlarmBtn">„Çª„ÉÉ„Éà</button>
            <button class="cancel-alarm" id="cancelAlarmBtn">„Ç≠„É£„É≥„Çª„É´</button>

            <div class="status not-set" id="status">Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì</div>
        </div>
    </div>

    <div class="video-overlay" id="videoOverlay">
        <video id="alarmVideo" loop>
            <source src="benkyo.mp4" type="video/mp4">
        </video>
        <button class="stop-alarm" id="stopAlarmBtn">„Ç¢„É©„Éº„É†„ÇíÊ≠¢„ÇÅ„Çã</button>
    </div>

    <script>
        const alarmTimeInput = document.getElementById('alarmTime');
        const setAlarmBtn = document.getElementById('setAlarmBtn');
        const cancelAlarmBtn = document.getElementById('cancelAlarmBtn');
        const status = document.getElementById('status');
        const currentTimeDisplay = document.getElementById('currentTime');
        const videoOverlay = document.getElementById('videoOverlay');
        const alarmVideo = document.getElementById('alarmVideo');
        const stopAlarmBtn = document.getElementById('stopAlarmBtn');
        const alarmModeBtn = document.getElementById('alarmModeBtn');
        const timerModeBtn = document.getElementById('timerModeBtn');
        const alarmSection = document.getElementById('alarmSection');
        const timerSection = document.getElementById('timerSection');
        const presetBtns = document.querySelectorAll('.preset-btn');
        const keypadBtns = document.querySelectorAll('.keypad-btn[data-num]');
        const clearBtn = document.getElementById('clearBtn');
        const deleteBtn = document.getElementById('deleteBtn');
        const timerMinutesDisplay = document.getElementById('timerMinutes');
        const timerSecondsDisplay = document.getElementById('timerSeconds');
        const currentTimeSection = document.querySelector('.current-time-section');

        let alarmTime = null;
        let checkInterval = null;
        let timerTimeout = null;
        let currentMode = 'alarm'; // 'alarm' or 'timer'
        let timerInput = ''; // „Çø„Ç§„Éû„Éº„ÅÆÂÖ•ÂäõÂÄ§ÔºàÊúÄÂ§ß4Ê°Å: MMSSÔºâ

        // ÁèæÂú®ÊôÇÂàª„ÇíË°®Á§∫
        function updateCurrentTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            currentTimeDisplay.textContent = `${hours}:${minutes}:${seconds}`;
        }

        updateCurrentTime();
        setInterval(updateCurrentTime, 1000);

        // „É¢„Éº„ÉâÂàá„ÇäÊõø„Åà
        alarmModeBtn.addEventListener('click', () => {
            currentMode = 'alarm';
            alarmModeBtn.classList.add('active');
            timerModeBtn.classList.remove('active');
            alarmSection.classList.add('active');
            timerSection.classList.remove('active');
            currentTimeSection.classList.remove('hidden');
            resetAlarm();
        });

        timerModeBtn.addEventListener('click', () => {
            currentMode = 'timer';
            timerModeBtn.classList.add('active');
            alarmModeBtn.classList.remove('active');
            timerSection.classList.add('active');
            alarmSection.classList.remove('active');
            currentTimeSection.classList.add('hidden');
            resetAlarm();
        });

        // „Çø„Ç§„Éû„ÉºË°®Á§∫„ÇíÊõ¥Êñ∞
        function updateTimerDisplay() {
            const padded = timerInput.padStart(4, '0');
            const minutes = padded.slice(0, 2);
            const seconds = padded.slice(2, 4);
            timerMinutesDisplay.textContent = minutes;
            timerSecondsDisplay.textContent = seconds;
        }

        // „Ç≠„Éº„Éë„ÉÉ„ÉâÂÖ•Âäõ
        keypadBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                if (timerInput.length < 4) {
                    timerInput += btn.dataset.num;
                    updateTimerDisplay();
                }
            });
        });

        // „ÇØ„É™„Ç¢„Éú„Çø„É≥
        clearBtn.addEventListener('click', () => {
            timerInput = '';
            updateTimerDisplay();
        });

        // ÂâäÈô§„Éú„Çø„É≥
        deleteBtn.addEventListener('click', () => {
            timerInput = timerInput.slice(0, -1);
            updateTimerDisplay();
        });

        // „Éó„É™„Çª„ÉÉ„Éà„Çø„Ç§„Éû„Éº
        presetBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const minutes = parseInt(btn.dataset.minutes);
                setTimerFromMinutes(minutes);
            });
        });

        // „Éó„É™„Çª„ÉÉ„Éà„Åã„Çâ„Çø„Ç§„Éû„Éº„Çí„Çª„ÉÉ„Éà
        function setTimerFromMinutes(minutes) {
            const totalSeconds = minutes * 60;
            const milliseconds = totalSeconds * 1000;
            const targetTime = new Date(Date.now() + milliseconds);
            const hours = String(targetTime.getHours()).padStart(2, '0');
            const mins = String(targetTime.getMinutes()).padStart(2, '0');

            status.textContent = `„Çø„Ç§„Éû„ÉºË®≠ÂÆö: ${minutes}ÂàÜÂæå (${hours}:${mins}) „Å´ÂãâÂº∑„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ„ÅåÂÜçÁîü„Åï„Çå„Åæ„Åô`;
            status.className = 'status waiting';
            setAlarmBtn.style.display = 'none';
            cancelAlarmBtn.style.display = 'block';

            timerTimeout = setTimeout(triggerAlarm, milliseconds);
        }

        // „Ç≠„Éº„Éë„ÉÉ„Éâ„Åã„Çâ„Çø„Ç§„Éû„Éº„Çí„Çª„ÉÉ„Éà
        function setTimerFromKeypad() {
            const padded = timerInput.padStart(4, '0');
            const minutes = parseInt(padded.slice(0, 2));
            const seconds = parseInt(padded.slice(2, 4));
            const totalSeconds = minutes * 60 + seconds;

            if (totalSeconds === 0) {
                alert('ÊôÇÈñì„ÇíË®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ');
                return;
            }

            const milliseconds = totalSeconds * 1000;
            const targetTime = new Date(Date.now() + milliseconds);
            const hours = String(targetTime.getHours()).padStart(2, '0');
            const mins = String(targetTime.getMinutes()).padStart(2, '0');

            const displayMinutes = minutes > 0 ? `${minutes}ÂàÜ` : '';
            const displaySeconds = seconds > 0 ? `${seconds}Áßí` : '';
            const timeText = displayMinutes + displaySeconds;

            status.textContent = `„Çø„Ç§„Éû„ÉºË®≠ÂÆö: ${timeText}Âæå (${hours}:${mins}) „Å´ÂãâÂº∑„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ„ÅåÂÜçÁîü„Åï„Çå„Åæ„Åô`;
            status.className = 'status waiting';
            setAlarmBtn.style.display = 'none';
            cancelAlarmBtn.style.display = 'block';

            timerTimeout = setTimeout(triggerAlarm, milliseconds);
        }

        // „Ç¢„É©„Éº„É†„Çí„Çª„ÉÉ„Éà
        setAlarmBtn.addEventListener('click', () => {
            if (currentMode === 'timer') {
                setTimerFromKeypad();
            } else {
                alarmTime = alarmTimeInput.value;
                if (!alarmTime) {
                    alert('ÊôÇÂàª„ÇíË®≠ÂÆö„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ');
                    return;
                }

                status.textContent = `„Ç¢„É©„Éº„É†Ë®≠ÂÆö: ${alarmTime} „Å´ÂãâÂº∑„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ„ÅåÂÜçÁîü„Åï„Çå„Åæ„Åô`;
                status.className = 'status waiting';
                setAlarmBtn.style.display = 'none';
                cancelAlarmBtn.style.display = 'block';

                checkInterval = setInterval(checkAlarm, 1000);
            }
        });

        // „Ç¢„É©„Éº„É†„Çí„Ç≠„É£„É≥„Çª„É´
        cancelAlarmBtn.addEventListener('click', () => {
            resetAlarm();
        });

        function resetAlarm() {
            if (checkInterval) clearInterval(checkInterval);
            if (timerTimeout) clearTimeout(timerTimeout);
            alarmTime = null;
            timerInput = '';
            if (currentMode === 'timer') {
                updateTimerDisplay();
            }
            status.textContent = 'Ë®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì';
            status.className = 'status not-set';
            setAlarmBtn.style.display = 'block';
            cancelAlarmBtn.style.display = 'none';
        }

        // „Ç¢„É©„Éº„É†ÊôÇÂàª„ÉÅ„Çß„ÉÉ„ÇØ
        function checkAlarm() {
            const now = new Date();
            const currentTime = String(now.getHours()).padStart(2, '0') + ':' +
                              String(now.getMinutes()).padStart(2, '0');

            if (currentTime === alarmTime) {
                triggerAlarm();
            }
        }

        // „Ç¢„É©„Éº„É†Áô∫Âãï
        function triggerAlarm() {
            if (checkInterval) clearInterval(checkInterval);
            if (timerTimeout) clearTimeout(timerTimeout);
            videoOverlay.classList.add('active');
            alarmVideo.play();

            // ÈÄöÁü•„ÇÇË°®Á§∫ÔºàË®±ÂèØ„Åï„Çå„Å¶„ÅÑ„ÇãÂ†¥ÂêàÔºâ
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('Ê≤≥Èáé„Ç¢„É©„Éº„É†', {
                    body: 'ÂãâÂº∑„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ',
                    icon: 'üìö'
                });
            }
        }

        // „Ç¢„É©„Éº„É†„ÇíÊ≠¢„ÇÅ„Çã
        stopAlarmBtn.addEventListener('click', () => {
            alarmVideo.pause();
            alarmVideo.currentTime = 0;
            videoOverlay.classList.remove('active');
            resetAlarm();
        });

        // ÈÄöÁü•„ÅÆË®±ÂèØ„Çí„É™„ÇØ„Ç®„Çπ„Éà
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }

        // „Éö„Éº„Ç∏„ÅåÈùûË°®Á§∫„Åß„ÇÇ„Ç¢„É©„Éº„É†„ÅåÂãï‰Ωú„Åô„Çã„Çà„ÅÜ„Å´„Åô„Çã
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden && videoOverlay.classList.contains('active')) {
                alarmVideo.play();
            }
        });
    </script>
</body>
</html>
